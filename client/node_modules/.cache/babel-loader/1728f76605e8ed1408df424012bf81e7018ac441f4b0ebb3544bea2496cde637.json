{"ast":null,"code":"import axios from 'axios';\nconst api = axios.create({\n  baseURL: 'http://localhost:3001/api',\n  withCredentials: true\n});\nlet cachedData = null;\nexport const fetchSpotifyDataWithQuip = async () => {\n  var _spotifyData$data, _spotifyData$data$top;\n  if (cachedData) return cachedData;\n  if (quipCooldown) return cachedData; // Prevent overlapping requests\n\n  quipCooldown = true;\n  setTimeout(() => quipCooldown = false, 5000); // Cooldown for 5 seconds\n\n  const spotifyData = await api.get('/fetch-spotify-data');\n  if ((_spotifyData$data = spotifyData.data) !== null && _spotifyData$data !== void 0 && (_spotifyData$data$top = _spotifyData$data.topArtists) !== null && _spotifyData$data$top !== void 0 && _spotifyData$data$top.length) {\n    const artistNames = spotifyData.data.topArtists.map(artist => artist.name).slice(0, 5).join(', ');\n    const quipResponse = await api.post('/generate-quip', {\n      statDescription: `Your top artists are: ${artistNames}`\n    });\n    cachedData = {\n      stats: spotifyData.data,\n      quip: quipResponse.data.quip\n    };\n    return cachedData;\n  }\n  cachedData = {\n    stats: spotifyData.data,\n    quip: ''\n  };\n  return cachedData;\n};\nexport const fetchUserProfile = async () => {\n  const response = await api.get('/user-profile');\n  return response.data;\n};\nexport const fetchTopArtists = async () => {\n  const response = await api.get('/stats/me/artists');\n  return response.data;\n};\nexport const fetchTopTracks = async () => {\n  const response = await api.get('/stats/me/tracks');\n  return response.data;\n};\nexport default api;","map":{"version":3,"names":["axios","api","create","baseURL","withCredentials","cachedData","fetchSpotifyDataWithQuip","_spotifyData$data","_spotifyData$data$top","quipCooldown","setTimeout","spotifyData","get","data","topArtists","length","artistNames","map","artist","name","slice","join","quipResponse","post","statDescription","stats","quip","fetchUserProfile","response","fetchTopArtists","fetchTopTracks"],"sources":["C:/Users/adwit/Better-Spotify-Wrapped/client/src/utils/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst api = axios.create({\r\n  baseURL: 'http://localhost:3001/api',\r\n  withCredentials: true,\r\n});\r\n\r\nlet cachedData = null;\r\n\r\nexport const fetchSpotifyDataWithQuip = async () => {\r\n  if (cachedData) return cachedData;\r\n\r\n  if (quipCooldown) return cachedData; // Prevent overlapping requests\r\n\r\n  quipCooldown = true;\r\n  setTimeout(() => (quipCooldown = false), 5000); // Cooldown for 5 seconds\r\n\r\n  const spotifyData = await api.get('/fetch-spotify-data');\r\n  \r\n  if (spotifyData.data?.topArtists?.length) {\r\n    const artistNames = spotifyData.data.topArtists\r\n      .map(artist => artist.name)\r\n      .slice(0, 5)\r\n      .join(', ');\r\n      \r\n    const quipResponse = await api.post('/generate-quip', {\r\n      statDescription: `Your top artists are: ${artistNames}`\r\n    });\r\n    \r\n    cachedData = {\r\n      stats: spotifyData.data,\r\n      quip: quipResponse.data.quip\r\n    };\r\n    \r\n    return cachedData;\r\n  }\r\n  \r\n  cachedData = {\r\n    stats: spotifyData.data,\r\n    quip: ''\r\n  };\r\n  \r\n  return cachedData;\r\n};\r\n\r\nexport const fetchUserProfile = async () => {\r\n  const response = await api.get('/user-profile');\r\n  return response.data;\r\n};\r\n\r\nexport const fetchTopArtists = async () => {\r\n  const response = await api.get('/stats/me/artists');\r\n  return response.data;\r\n};\r\n\r\nexport const fetchTopTracks = async () => {\r\n  const response = await api.get('/stats/me/tracks');\r\n  return response.data;\r\n};\r\n\r\nexport default api;\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,GAAG,GAAGD,KAAK,CAACE,MAAM,CAAC;EACvBC,OAAO,EAAE,2BAA2B;EACpCC,eAAe,EAAE;AACnB,CAAC,CAAC;AAEF,IAAIC,UAAU,GAAG,IAAI;AAErB,OAAO,MAAMC,wBAAwB,GAAG,MAAAA,CAAA,KAAY;EAAA,IAAAC,iBAAA,EAAAC,qBAAA;EAClD,IAAIH,UAAU,EAAE,OAAOA,UAAU;EAEjC,IAAII,YAAY,EAAE,OAAOJ,UAAU,CAAC,CAAC;;EAErCI,YAAY,GAAG,IAAI;EACnBC,UAAU,CAAC,MAAOD,YAAY,GAAG,KAAM,EAAE,IAAI,CAAC,CAAC,CAAC;;EAEhD,MAAME,WAAW,GAAG,MAAMV,GAAG,CAACW,GAAG,CAAC,qBAAqB,CAAC;EAExD,KAAAL,iBAAA,GAAII,WAAW,CAACE,IAAI,cAAAN,iBAAA,gBAAAC,qBAAA,GAAhBD,iBAAA,CAAkBO,UAAU,cAAAN,qBAAA,eAA5BA,qBAAA,CAA8BO,MAAM,EAAE;IACxC,MAAMC,WAAW,GAAGL,WAAW,CAACE,IAAI,CAACC,UAAU,CAC5CG,GAAG,CAACC,MAAM,IAAIA,MAAM,CAACC,IAAI,CAAC,CAC1BC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CACXC,IAAI,CAAC,IAAI,CAAC;IAEb,MAAMC,YAAY,GAAG,MAAMrB,GAAG,CAACsB,IAAI,CAAC,gBAAgB,EAAE;MACpDC,eAAe,EAAE,yBAAyBR,WAAW;IACvD,CAAC,CAAC;IAEFX,UAAU,GAAG;MACXoB,KAAK,EAAEd,WAAW,CAACE,IAAI;MACvBa,IAAI,EAAEJ,YAAY,CAACT,IAAI,CAACa;IAC1B,CAAC;IAED,OAAOrB,UAAU;EACnB;EAEAA,UAAU,GAAG;IACXoB,KAAK,EAAEd,WAAW,CAACE,IAAI;IACvBa,IAAI,EAAE;EACR,CAAC;EAED,OAAOrB,UAAU;AACnB,CAAC;AAED,OAAO,MAAMsB,gBAAgB,GAAG,MAAAA,CAAA,KAAY;EAC1C,MAAMC,QAAQ,GAAG,MAAM3B,GAAG,CAACW,GAAG,CAAC,eAAe,CAAC;EAC/C,OAAOgB,QAAQ,CAACf,IAAI;AACtB,CAAC;AAED,OAAO,MAAMgB,eAAe,GAAG,MAAAA,CAAA,KAAY;EACzC,MAAMD,QAAQ,GAAG,MAAM3B,GAAG,CAACW,GAAG,CAAC,mBAAmB,CAAC;EACnD,OAAOgB,QAAQ,CAACf,IAAI;AACtB,CAAC;AAED,OAAO,MAAMiB,cAAc,GAAG,MAAAA,CAAA,KAAY;EACxC,MAAMF,QAAQ,GAAG,MAAM3B,GAAG,CAACW,GAAG,CAAC,kBAAkB,CAAC;EAClD,OAAOgB,QAAQ,CAACf,IAAI;AACtB,CAAC;AAED,eAAeZ,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}